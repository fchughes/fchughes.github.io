import{b as d,E as _,f as h,aw as g,h as l,a as m,aF as w,aG as y,ab as E,ad as o,k as p,an as k,w as q,aH as v}from"./D4uoq7pJ.js";function S(s,r,...n){var e=s,t=o,u;d(()=>{t!==(t=r())&&(u&&(g(u),u=null),u=h(()=>t(e,...n)))},_),l&&(e=p)}function T(s){return(r,...n)=>{var e=s(...n),t;if(l)t=p,m();else{var u=e.render().trim(),c=w(u);t=k(c),r.before(t)}const a=e.setup?.(t);y(t,t),typeof a=="function"&&E(a)}}function F(s,r,n){if(s==null)return r(void 0),o;const e=q(()=>s.subscribe(r,n));return e.unsubscribe?()=>e.unsubscribe():e}const f=[];function x(s,r=o){let n=null;const e=new Set;function t(a){if(v(s,a)&&(s=a,n)){const b=!f.length;for(const i of e)i[1](),f.push(i,s);if(b){for(let i=0;i<f.length;i+=2)f[i][0](f[i+1]);f.length=0}}}function u(a){t(a(s))}function c(a,b=o){const i=[a,b];return e.add(i),e.size===1&&(n=r(t,u)||o),a(s),()=>{e.delete(i),e.size===0&&n&&(n(),n=null)}}return{set:t,update:u,subscribe:c}}function z(s){let r;return F(s,n=>r=n)(),r}export{S as a,T as c,z as g,F as s,x as w};
