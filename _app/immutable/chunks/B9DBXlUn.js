import{b as _,E as d,f as h,an as g,h as l,a as m,ao as w,ap as y,$ as q,_ as f,k as p,aq as E,w as k,ar as v}from"./BUPh_ox9.js";function T(s,r,...n){var e=s,t=f,u;_(()=>{t!==(t=r())&&(u&&(g(u),u=null),u=h(()=>t(e,...n)))},d),l&&(e=p)}function x(s){return(r,...n)=>{var e=s(...n),t;if(l)t=p,m();else{var u=e.render().trim(),c=w(u);t=E(c),r.before(t)}const a=e.setup?.(t);y(t,t),typeof a=="function"&&q(a)}}function R(s,r,n){if(s==null)return r(void 0),f;const e=k(()=>s.subscribe(r,n));return e.unsubscribe?()=>e.unsubscribe():e}const o=[];function z(s,r=f){let n=null;const e=new Set;function t(a){if(v(s,a)&&(s=a,n)){const b=!o.length;for(const i of e)i[1](),o.push(i,s);if(b){for(let i=0;i<o.length;i+=2)o[i][0](o[i+1]);o.length=0}}}function u(a){t(a(s))}function c(a,b=f){const i=[a,b];return e.add(i),e.size===1&&(n=r(t,u)||f),a(s),()=>{e.delete(i),e.size===0&&n&&(n(),n=null)}}return{set:t,update:u,subscribe:c}}function A(s){let r;return R(s,n=>r=n)(),r}export{R as a,x as c,A as g,T as s,z as w};
